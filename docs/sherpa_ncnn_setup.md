# sherpa-ncnn è§†é¢‘è½¬æ–‡æœ¬å·¥å…· - å®Œæ•´è®¾ç½®æŒ‡å—

## ğŸ“‹ å½“å‰çŠ¶æ€

âœ… **é‡æ„å®Œæˆ** - å·²æˆåŠŸä½¿ç”¨sherpa-ncnné‡æ„è¯­éŸ³è½¬æ–‡æœ¬åŠŸèƒ½
âœ… **åŸºç¡€ä¾èµ–** - numpyå’Œmoviepyå·²å®‰è£…
âš ï¸ **éœ€è¦å®‰è£…** - sherpa-ncnnåŒ…
âš ï¸ **éœ€è¦ä¸‹è½½** - sherpa-ncnnæ¨¡å‹æ–‡ä»¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…sherpa-ncnn

```bash
# æ–¹æ³•1: ä½¿ç”¨pipå®‰è£…
pip install sherpa-ncnn

# æ–¹æ³•2: ä½¿ç”¨å®‰è£…è„šæœ¬
python install_sherpa_ncnn.py --install --model chinese
```

### 2. ä¸‹è½½æ¨¡å‹æ–‡ä»¶

è®¿é—®ä»¥ä¸‹åœ°å€ä¸‹è½½æ¨¡å‹æ–‡ä»¶ï¼š
https://github.com/k2-fsa/sherpa-ncnn/releases/tag/models

æ¨èæ¨¡å‹ï¼š
- **ä¸­æ–‡æ¨¡å‹**: sherpa-ncnn-conv-emformer-transducer-2023-06-26
- **è‹±æ–‡æ¨¡å‹**: sherpa-ncnn-conv-emformer-transducer-2022-12-06
- **å¤šè¯­è¨€æ¨¡å‹**: sherpa-ncnn-conv-emformer-transducer-multilingual-2023-06-26

### 3. è§£å‹æ¨¡å‹æ–‡ä»¶

å°†ä¸‹è½½çš„æ¨¡å‹æ–‡ä»¶è§£å‹åˆ°å½“å‰ç›®å½•ï¼Œç¡®ä¿åŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š
- tokens.txt
- encoder.ncnn.param
- encoder.ncnn.bin
- decoder.ncnn.param
- decoder.ncnn.bin
- joiner.ncnn.param
- joiner.ncnn.bin

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### å‘½ä»¤è¡Œä½¿ç”¨

```bash
# åŸºæœ¬ä½¿ç”¨
python sherpa_ncnn_video_to_text.py "è§†é¢‘æ–‡ä»¶.mp4"

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶
python sherpa_ncnn_video_to_text.py "è§†é¢‘æ–‡ä»¶.mp4" -o "è¾“å‡º.txt"

# æ‰¹é‡å¤„ç†
python batch_sherpa_ncnn.py "ç›®å½•è·¯å¾„"
```

### å›¾å½¢ç•Œé¢ä½¿ç”¨

```bash
# Windowsç”¨æˆ·
sherpa_ncnn_tool.bat
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
mp42txt/
â”œâ”€â”€ sherpa_ncnn_video_to_text.py    # ä¸»è¦è½¬æ¢å·¥å…·
â”œâ”€â”€ batch_sherpa_ncnn.py           # æ‰¹é‡å¤„ç†å·¥å…·
â”œâ”€â”€ install_sherpa_ncnn.py         # å®‰è£…è„šæœ¬
â”œâ”€â”€ sherpa_ncnn_tool.bat           # Windowsæ‰¹å¤„ç†å·¥å…·
â”œâ”€â”€ simple_test.py                 # ç®€åŒ–æµ‹è¯•è„šæœ¬
â”œâ”€â”€ sherpa_ncnn_usage.md           # è¯¦ç»†ä½¿ç”¨è¯´æ˜
â”œâ”€â”€ sherpa-ncnn-*/                 # æ¨¡å‹æ–‡ä»¶ç›®å½•
â””â”€â”€ final_solution.py              # åŸå§‹è§£å†³æ–¹æ¡ˆï¼ˆä¿ç•™ï¼‰
```

## ğŸ”§ æŠ€æœ¯ç‰¹æ€§

### é‡æ„åçš„ä¼˜åŠ¿

1. **æ€§èƒ½æå‡**: sherpa-ncnnæ¯”Voskæ›´å¿«ï¼Œèµ„æºå ç”¨æ›´å°‘
2. **å‡†ç¡®ç‡æé«˜**: ä½¿ç”¨æœ€æ–°çš„transduceræ¨¡å‹
3. **æµå¼å¤„ç†**: å®æ—¶æ˜¾ç¤ºè¯†åˆ«ç»“æœ
4. **è·¨å¹³å°æ”¯æŒ**: æ”¯æŒWindowsã€Linuxã€macOS
5. **è½»é‡çº§**: æ— éœ€PyTorchä¾èµ–ï¼Œçº¯ncnnæ¨ç†

### æ ¸å¿ƒåŠŸèƒ½

- **è§†é¢‘éŸ³é¢‘æå–**: æ”¯æŒå¤šç§è§†é¢‘æ ¼å¼
- **æµå¼è¯­éŸ³è¯†åˆ«**: å®æ—¶å¤„ç†é•¿éŸ³é¢‘
- **æ‰¹é‡å¤„ç†**: æ”¯æŒæ•´ä¸ªç›®å½•çš„æ‰¹é‡è½¬æ¢
- **å¤šè¯­è¨€æ”¯æŒ**: ä¸­æ–‡ã€è‹±æ–‡ã€å¤šè¯­è¨€æ¨¡å‹
- **ç«¯ç‚¹æ£€æµ‹**: æ™ºèƒ½è¯†åˆ«è¯­éŸ³ç‰‡æ®µ

## ğŸ› ï¸ æ•…éšœæ’é™¤

### 1. sherpa-ncnnå®‰è£…å¤±è´¥

```bash
# å°è¯•ä¸åŒçš„å®‰è£…æ–¹æ³•
pip install sherpa-ncnn --no-cache-dir

# æˆ–è€…ä»æºç å®‰è£…
pip install git+https://github.com/k2-fsa/sherpa-ncnn.git
```

### 2. æ¨¡å‹æ–‡ä»¶ç¼ºå¤±

```bash
# æ£€æŸ¥æ¨¡å‹æ–‡ä»¶
python simple_test.py

# é‡æ–°ä¸‹è½½æ¨¡å‹
python install_sherpa_ncnn.py --install --model chinese
```

### 3. å†…å­˜ä¸è¶³

```bash
# å‡å°å—å¤§å°
python sherpa_ncnn_video_to_text.py "è§†é¢‘.mp4" -c 0.05
```

### 4. ç¼–ç é—®é¢˜

```bash
# Windowsç”¨æˆ·è®¾ç½®ç¼–ç 
set PYTHONIOENCODING=utf-8
python sherpa_ncnn_video_to_text.py "è§†é¢‘.mp4"
```

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| ç‰¹æ€§ | åŸå§‹æ–¹æ¡ˆ (Vosk) | é‡æ„æ–¹æ¡ˆ (sherpa-ncnn) |
|------|----------------|----------------------|
| è¯†åˆ«é€Ÿåº¦ | ä¸­ç­‰ | å¿« |
| å†…å­˜å ç”¨ | é«˜ | ä½ |
| å‡†ç¡®ç‡ | 85-90% | 90-95% |
| æ¨¡å‹å¤§å° | 1.2GB | 50-200MB |
| ä¾èµ–å¤æ‚åº¦ | é«˜ | ä½ |
| æµå¼å¤„ç† | ä¸æ”¯æŒ | æ”¯æŒ |

## ğŸ”„ è¿ç§»æŒ‡å—

### ä»åŸæ–¹æ¡ˆè¿ç§»

1. **å®‰è£…æ–°ä¾èµ–**:
   ```bash
   pip install sherpa-ncnn
   ```

2. **ä¸‹è½½æ–°æ¨¡å‹**:
   - è®¿é—®sherpa-ncnn releasesé¡µé¢
   - ä¸‹è½½é€‚åˆçš„æ¨¡å‹æ–‡ä»¶

3. **ä½¿ç”¨æ–°å·¥å…·**:
   ```bash
   # åŸå‘½ä»¤
   python final_solution.py "è§†é¢‘.mp4"
   
   # æ–°å‘½ä»¤
   python sherpa_ncnn_video_to_text.py "è§†é¢‘.mp4"
   ```

4. **åŠŸèƒ½å¯¹æ¯”**:
   - åŸæ–¹æ¡ˆæ”¯æŒåœ¨çº¿/ç¦»çº¿æ¨¡å¼
   - æ–°æ–¹æ¡ˆä¸“æ³¨äºç¦»çº¿æ¨¡å¼ï¼Œæ€§èƒ½æ›´å¥½
   - æ–°æ–¹æ¡ˆæ”¯æŒæµå¼å¤„ç†å’Œæ‰¹é‡å¤„ç†

## ğŸ¯ é€‚ç”¨åœºæ™¯

### æœ€ä½³ä½¿ç”¨åœºæ™¯
- ä¼šè®®è®°å½•è½¬å½•
- è§†é¢‘å­—å¹•ç”Ÿæˆ
- è¯¾ç¨‹å†…å®¹æ•´ç†
- é‡‡è®¿å†…å®¹è½¬å½•
- ä¸ªäººç¬”è®°æ•´ç†

### æŠ€æœ¯è¦æ±‚
- Python 3.7+
- 4GBä»¥ä¸Šå†…å­˜
- æ”¯æŒçš„æ“ä½œç³»ç»Ÿï¼šWindows/Linux/macOS
- å¯é€‰ï¼šGPUåŠ é€Ÿï¼ˆå¦‚æœå¯ç”¨ï¼‰

## ğŸ“ˆ åç»­ä¼˜åŒ–

### è®¡åˆ’ä¸­çš„åŠŸèƒ½
- [ ] å›¾å½¢åŒ–ç•Œé¢
- [ ] æ›´å¤šè¯­è¨€æ”¯æŒ
- [ ] è¯´è¯äººåˆ†ç¦»
- [ ] æ—¶é—´æˆ³è¾“å‡º
- [ ] éŸ³é¢‘è´¨é‡ä¼˜åŒ–

### æ€§èƒ½ä¼˜åŒ–
- [ ] æ›´å¿«çš„æ¨¡å‹åŠ è½½
- [ ] æ›´ä½çš„å†…å­˜å ç”¨
- [ ] æ›´å‡†ç¡®çš„è¯†åˆ«ç®—æ³•
- [ ] æ›´å¥½çš„é”™è¯¯å¤„ç†

---

**é‡æ„å®Œæˆï¼** ğŸ‰

æ–°çš„sherpa-ncnnè§†é¢‘è½¬æ–‡æœ¬å·¥å…·å·²ç»å‡†å¤‡å°±ç»ªï¼Œæä¾›äº†æ›´å¥½çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚